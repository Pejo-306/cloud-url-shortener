{
    "version": "0.2.0",
    "configurations": [
        {
            "type": "aws-sam",
            "request": "direct-invoke",
            "name": "cloud-url-shortener:ShortenUrlFunction",
            "invokeTarget": {
                "target": "template",
                "templatePath": "${workspaceFolder}/template.yaml",
                "logicalId": "ShortenUrlFunction"
            },
            "aws": {
                "credentials": "profile:personal-dev",
                "region": "eu-central-1"
            },
            "lambda": {
                "payload": {
                    "json": {
                        "resource": "/v1/shorten",
                        "path": "/v1/shorten",
                        "httpMethod": "POST",
                        "headers": {
                            "Content-Type": "application/json"
                        },
                        "body": "{\"target_url\": \"https://example.com/blog/chuck-norris-is-awesome\"}",
                        "isBase64Encoded": false,
                        "requestContext": {
                            "domainName": "localhost:3000",
                            "stage": "local",
                            "resourcePath": "/v1/shorten",
                            "httpMethod": "POST",
                            "authorizer": {
                                "claims": {
                                    "sub": "lambda123",
                                    "email": "lambda@example.com",
                                    "cognito:username": "lambda-user",
                                    "email_verified": "true"
                                }
                            }
                        }
                    }
                },
                "environmentVariables": {
                    "APP_ENV": "local",
                    "APP_NAME": "cloudshortener",
                    "PROJECT_ROOT": "/var/task/",
                    "APPCONFIG_AGENT_URL": "http://host.docker.internal:2772",
                    "ELASTICACHE_HOST_PARAM": "/cloudshortener/local/elasticache/host",
                    "ELASTICACHE_PORT_PARAM": "/cloudshortener/local/elasticache/port",
                    "ELASTICACHE_DB_PARAM": "/cloudshortener/local/elasticache/db",
                    "ELASTICACHE_USER_PARAM": "/cloudshortener/local/elasticache/user",
                    "ELASTICACHE_SECRET": "cloudshortener/local/elasticache/credentials",
                    "LOCALSTACK_ENDPOINT": "http://localstack:4566"
                },
                "runtime": "python3.13"
            },
            "sam": {
                "containerBuild": true,
                "dockerNetwork": "cloud-url-shortener_default"
            }
        },
        {
            "type": "aws-sam",
            "request": "direct-invoke",
            "name": "cloud-url-shortener:RedirectUrlFunction",
            "invokeTarget": {
                "target": "template",
                "templatePath": "${workspaceFolder}/template.yaml",
                "logicalId": "RedirectUrlFunction"
            },
            "aws": {
                "credentials": "profile:personal-dev",
                "region": "eu-central-1"
            },
            "lambda": {
                "payload": {
                    "json": {
                        "resource": "/{shortcode}",
                        "path": "/Gh71TCO",
                        "httpMethod": "GET",
                        "pathParameters": {
                            "shortcode": "Gh71TCO"
                        },
                        "requestContext": {
                            "domainName": "localhost:3000",
                            "stage": "local"
                        }
                    }
                },
                "environmentVariables": {
                    "APP_ENV": "local",
                    "APP_NAME": "cloudshortener",
                    "PROJECT_ROOT": "/var/task/",
                    "APPCONFIG_AGENT_URL": "http://host.docker.internal:2772",
                    "ELASTICACHE_HOST_PARAM": "/cloudshortener/local/elasticache/host",
                    "ELASTICACHE_PORT_PARAM": "/cloudshortener/local/elasticache/port",
                    "ELASTICACHE_DB_PARAM": "/cloudshortener/local/elasticache/db",
                    "ELASTICACHE_USER_PARAM": "/cloudshortener/local/elasticache/user",
                    "ELASTICACHE_SECRET": "cloudshortener/local/elasticache/credentials",
                    "LOCALSTACK_ENDPOINT": "http://localstack:4566"
                },
                "runtime": "python3.13"
            },
            "sam": {
                "containerBuild": true,
                "dockerNetwork": "cloud-url-shortener_default"
            }
        }
    ]
}